(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{171:function(e,t,n){e.exports=n(212)},212:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),i=n(70),l=n(71),u=n(89),s=n(88),d=n(280),p=n(277),m=n(23),f=n(38),g=n(24),h=n(20),v=Object(h.a)(),E=n(49),b=n(47),S=n(270),k=n(272),y=n(216),O=n(149),x=n(259),w=n(7),j=(n(274),n(271)),C=n(63),T=n(129),F=n.n(T),R=n(130),D=n.n(R),I=(n(282),n(118),n(119),n(36)),L=n(41),M=Object(L.b)({name:"songs",initialState:{songs:[],currentSongId:null,lastSongIndex:0,currentSongData:{},isLoading:!1,getOnlyFavor:!1,term:"",fontSize:14,editMode:!1,showHidden:!1},reducers:{setSongId:function(e,t){e.currentSongId=t.payload},setLastSongIndex:function(e,t){e.lastSongIndex=t.payload},setSongData:function(e,t){e.currentSongData=t.payload},toogleGetOnlyFavor:function(e){e.getOnlyFavor=!e.getOnlyFavor},setSongsList:function(e,t){e.songs=t.payload},setTerm:function(e,t){e.term=t.payload},setFontSize:function(e,t){e.fontSize=t.payload},setEditMode:function(e,t){e.editMode=t.payload},setLoadingOn:function(e){e.isLoading=!0},setLoadingOff:function(e){e.isLoading=!1},toogleHide:function(e,t){e.currentSongData&&(e.currentSongData.hide=!e.currentSongData.hide),e.songs.map((function(e){return e._id===t.payload&&(e.hide=!e.hide),e}))},toogleFavor:function(e,t){e.currentSongData&&(e.currentSongData.favor=!e.currentSongData.favor),e.songs.map((function(e){return e._id===t.payload&&(e.favor=!e.favor),e}))}}}),z=M.actions,B=M.reducer,_=z.setSongId,N=z.setSongData,W=z.toogleGetOnlyFavor,P=z.setSongsList,A=z.setTerm,H=z.toogleFavor,G=z.setLoadingOff,U=z.setLoadingOn,J=z.setEditMode,q=z.setFontSize,K=z.toogleHide,$=z.setLastSongIndex,V=B,X=n(120),Q=n(12),Y=n.n(Q),Z=n(33),ee="";ee="https://random-cards-server.herokuapp.com/api/v1/";var te=n(121).create({baseURL:ee,headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}),ne=function(e){return te.get("/cards?limit=999"+(e?"&favor=true":""))},ae=function(e){return te.get("/cards?id="+e)},re=function(e,t){return te.post("/cards",{_id:e,favor:t})},oe=function(e,t){return te.post("/cards",{_id:e,hide:t})},ce=function(e,t){return te.post("/cards",{_id:e,content:t})},ie=function(e,t,n){return te.post("/cards/add",{name:e,content:t,favor:n})},le=function(e){return te.delete("/cards",{data:{_id:e}})},ue=Object(L.b)({name:"app",initialState:{initialized:!1,error:"",popper:""},reducers:{initializedSuccess:function(e){e.initialized=!0},setError:function(e,t){e.error=t.payload}}}),se=ue.actions,de=ue.reducer,pe=se.initializedSuccess,me=se.setError,fe=de,ge=function(){return function(){var e=Object(Z.a)(Y.a.mark((function e(t,n){var a,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(U()),a=n().songReducer.getOnlyFavor,e.prev=2,e.next=5,ne(a);case 5:r=e.sent,t(P(r.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),t(me(e.t0.toString()));case 13:t(G());case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()},he=function(e,t){return function(){var n=Object(Z.a)(Y.a.mark((function n(a){return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,re(e,!t);case 2:a(H(e));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ve=function(e,t){return function(){var n=Object(Z.a)(Y.a.mark((function n(a,r){var o;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(U()),n.next=3,le(e);case 3:n.sent,o=r().songReducer.songs,a(P(o.filter((function(t){return t._id!=e})))),a(G()),t.push("/cards");case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Ee=n(286),be=n(266),Se=n(284),ke=n(268),ye=n(262),Oe=n(263),xe=n(265),we=n(267),je=n(264),Ce=n(285),Te=n(269),Fe=n(148),Re=n(122),De=r.a.createContext(),Ie=function(){return Object(a.useContext)(De)},Le=function(e){var t=e.children,n=e.onRedirectCallback,o=void 0===n?function(){return window.history.replaceState({},document.title,window.location.pathname)}:n,c=Object(Fe.a)(e,["children","onRedirectCallback"]),i=Object(a.useState)(),l=Object(E.a)(i,2),u=l[0],s=l[1],d=Object(a.useState)(),p=Object(E.a)(d,2),m=p[0],f=p[1],g=Object(a.useState)(),h=Object(E.a)(g,2),v=h[0],b=h[1],S=Object(a.useState)(!0),k=Object(E.a)(S,2),y=k[0],O=k[1],x=Object(a.useState)(!1),w=Object(E.a)(x,2),j=w[0],C=w[1];Object(a.useEffect)((function(){(function(){var e=Object(Z.a)(Y.a.mark((function e(){var t,n,a,r,i,l;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Re.a)(c);case 2:if(t=e.sent,b(t),!window.location.search.includes("code=")||!window.location.search.includes("state=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:n=e.sent,a=n.appState,o(a);case 10:return e.next=12,t.isAuthenticated();case 12:if(r=e.sent,s(r),!r){e.next=26;break}return e.next=17,t.getUser();case 17:return i=e.sent,f(i),e.next=21,t.getIdTokenClaims();case 21:return e.sent,e.next=24,t.getTokenSilently();case 24:l=e.sent,localStorage.setItem("TOKEN",l);case 26:O(!1);case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var T=function(){var e=Object(Z.a)(Y.a.mark((function e(){var t,n,a=arguments;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},C(!0),e.prev=2,e.next=5,v.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,C(!1),e.finish(10);case 13:return e.next=15,v.getUser();case 15:n=e.sent,f(n),s(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(Z.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,v.handleRedirectCallback();case 3:return e.next=5,v.getUser();case 5:t=e.sent,O(!1),s(!0),f(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(De.Provider,{value:{isAuthenticated:u,user:m,loading:y,popupOpen:j,loginWithPopup:T,handleRedirectCallback:F,getIdTokenClaims:function(){return v.getIdTokenClaims.apply(v,arguments)},loginWithRedirect:function(){return v.loginWithRedirect.apply(v,arguments)},getTokenSilently:function(){return v.getTokenSilently.apply(v,arguments)},getTokenWithPopup:function(){return v.getTokenWithPopup.apply(v,arguments)},logout:function(){return v.logout.apply(v,arguments)}}},t)},Me=n(127),ze=n.n(Me),Be=n(128),_e=n.n(Be),Ne=Object(x.a)((function(e){return Object(Ce.a)({list:{width:250},drawer:Object(b.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0})})})),We=function(e){var t=Ie(),n=t.isAuthenticated,a=t.loginWithRedirect,o=t.logout,c=t.user,i=Ne();return r.a.createElement(Se.a,{className:i.drawer,variant:"temporary",anchor:"left",open:e.open,onClose:e.handleDrawerClose,classes:{paper:i.drawerPaper}},r.a.createElement("div",{className:i.list,role:"presentation"},r.a.createElement(ye.a,null,r.a.createElement(Oe.a,{onClick:e.handleDrawerClose,button:!0,component:I.a,to:"//"},r.a.createElement(je.a,{primary:"Main"})),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,null,r.a.createElement(xe.a,null,r.a.createElement(Ee.a,{src:c.picture})),r.a.createElement(je.a,{primary:c.nickname})),r.a.createElement(Oe.a,{button:!0,component:I.a,to:"/profile",onClick:e.handleDrawerClose},r.a.createElement(je.a,{primary:"Profile"})),r.a.createElement(be.a,null)),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{onClick:e.handleDrawerClose,button:!0,component:I.a,to:"/cards"},r.a.createElement(we.a,null,r.a.createElement(ze.a,null)),r.a.createElement(je.a,{primary:"My cards"})),r.a.createElement(Oe.a,{button:!0,component:I.a,to:"/lists"},r.a.createElement(we.a,null,r.a.createElement(_e.a,null)),r.a.createElement(je.a,{primary:"My tags"})),r.a.createElement(be.a,null),r.a.createElement(Oe.a,null,r.a.createElement(ke.a,{control:r.a.createElement(Te.a,{checked:e.getOnlyFavor,onChange:function(){return e.toogleGetOnlyFavor()},name:"ShowOnlyFavor",color:"primary"}),label:"Show only favor"})),r.a.createElement(Oe.a,null,r.a.createElement(ke.a,{control:r.a.createElement(Te.a,{checked:e.getOnlyFavor,onChange:function(){return e.toogleGetOnlyFavor()},name:"ShowHide",color:"primary"}),label:"Show hide"}))),r.a.createElement(be.a,null),!n&&r.a.createElement(Oe.a,{onClick:function(){return a({})},button:!0},r.a.createElement(je.a,{primary:"Login"})),n&&r.a.createElement(Oe.a,{onClick:function(){return o()},button:!0},r.a.createElement(je.a,{primary:"Logout"})))))},Pe=Object(x.a)((function(e){return{list:{width:250},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(b.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(b.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(w.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(w.c)(e.palette.common.white,.25)},marginLeft:0,width:"70%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(b.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),Ae=Object(m.b)((function(e){return{getOnlyFavor:e.songReducer.getOnlyFavor,term:e.songReducer.term}}),{toogleGetOnlyFavor:W,toogleGetOnlyFavorUpdateList:function(e,t){return function(e,t){e(W()),t().songReducer.getOnlyFavor&&e(P(t().songReducer.songs.filter((function(e){return e.favor}))))}},setTerm:A})((function(e){var t=Pe(),n=r.a.useState(!1),a=Object(E.a)(n,2),o=a[0],c=a[1];return r.a.createElement("div",{className:t.root},r.a.createElement(S.a,{position:"sticky"},r.a.createElement(j.a,null,r.a.createElement(y.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"open drawer",onClick:function(){c(!0)}},r.a.createElement(F.a,null)),r.a.createElement(C.a,{className:t.title,variant:"h6",noWrap:!0},r.a.createElement(k.a,{component:I.a,to:"/",style:{color:"white"}},"Random Cards")),r.a.createElement("div",{className:t.search},r.a.createElement("div",{className:t.searchIcon},r.a.createElement(D.a,null)),r.a.createElement(O.a,{value:e.term,onChange:function(t){return e.setTerm(t.currentTarget.value)},placeholder:"Search\u2026",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"}})))),r.a.createElement(We,{handleDrawerClose:function(e){c(!1)},getOnlyFavor:e.getOnlyFavor,toogleGetOnlyFavor:e.toogleGetOnlyFavor,open:o}))})),He=function(e){var t=e.error;return r.a.createElement(C.a,{variant:"h1"},t)},Ge=n(275),Ue=function(){var e=Ie(),t=e.isAuthenticated,n=e.loginWithRedirect,a=e.logout,o=e.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{maxWidth:"lg"},r.a.createElement("div",null,r.a.createElement("h1",null,"Random cards"),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"\u041f\u0440\u0438\u0432\u0435\u0442, ",o.nickname),r.a.createElement("div",null," \u041c\u043e\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438"),r.a.createElement("div",null,"\u0422\u044d\u0433\u0438"),r.a.createElement(k.a,{variant:"outlined",onClick:function(){return a()}},"Logout")),!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b"),r.a.createElement(k.a,{variant:"outlined",onClick:function(){return n({})}},"Login")))))},Je=n(276),qe=Object(x.a)((function(e){return{root:{height:"97vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},spinner:{marginBottom:"30px"}}})),Ke=function(){var e=qe();return r.a.createElement(Ge.a,{className:e.root},r.a.createElement(Je.a,{size:100,className:e.spinner}),r.a.createElement(C.a,{variant:"h6"},"Songs is loading..."))};var $e=function(e){if(e.isLoading)return r.a.createElement(Ke,null)},Ve=Object(m.b)((function(e){return{lists:e.lists}}),null)($e),Xe=function(){var e=Ie(),t=e.loading,n=e.user;return t||!n?r.a.createElement("div",null,"Loading..."):r.a.createElement(a.Fragment,null,r.a.createElement("img",{src:n.picture,alt:"Profile"}),r.a.createElement("h2",null,n.name),r.a.createElement("p",null,n.email),r.a.createElement("code",null,JSON.stringify(n,null,2)))},Qe=n(34),Ye=n(62),Ze=Object(m.b)(null,{addSongThunk:function(e,t,n,a){return function(){var r=Object(Z.a)(Y.a.mark((function r(o){var c;return Y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o(U()),r.next=3,ie(t,n,a);case 3:c=r.sent,e.push("/card/"+c.data),o(G());case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return a.createElement(Qe.d,{initialValues:{name:"",content:"",favor:!1},validate:function(e){console.log("validate");var t={};return e.name||(t.name="Enter song name"),e.content||(t.text="Enter song text"),t},onSubmit:function(t,n){var a=n.setSubmitting;e.addSongThunk(v,t.name,t.content,!1),a(!1)}},(function(e){var t=e.submitForm,n=e.isSubmitting,r=e.errors,o=e.touched,c=e.handleBlur,i=e.values,l=e.handleChange;return a.createElement(Qe.c,null,a.createElement(Qe.b,{component:Ye.b,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Song name",name:"name",onBlur:c,onChange:l,value:i.name}),a.createElement(Qe.a,{name:"name"}),a.createElement(Qe.b,{component:Ye.a,name:"favor",type:"checkbox",Label:{label:"Add to favor?"}}),";",a.createElement(Qe.b,{component:Ye.b,variant:"outlined",margin:"normal",fullWidth:!0,rows:window.innerHeight/50,id:"content",label:"Song text",name:"content",multiline:!0,onChange:l}),o.text&&r.text?a.createElement("div",null,r.text):null,a.createElement("br",null),n&&a.createElement(p.a,null),a.createElement("br",null),a.createElement(k.a,{variant:"contained",color:"primary",disabled:n,onClick:t},"Save"))}))})),et=n(135),tt=n.n(et);var nt=n(214),at=n(281),rt=n(139),ot=n.n(rt),ct=n(136),it=n.n(ct),lt=n(140),ut=n.n(lt),st=n(137),dt=n.n(st),pt=n(138),mt=n.n(pt),ft=Object(x.a)((function(e){return Object(Ce.a)({root:{display:"flex",flexDirection:"column",flexWrap:"nowrap"},fab:{position:"absolute",bottom:e.spacing(5),right:e.spacing(5)},floatButtonBlock:{color:"black",position:"absolute",right:"10px",top:"100px",zIndex:100,"& Button":{display:"block"}}})})),gt=function(e){var t=ft();return r.a.createElement(at.a,{className:t.floatButtonBlock},r.a.createElement(y.a,{onClick:function(t){return e.shuffle(t)}},r.a.createElement(it.a,null)),r.a.createElement(y.a,{onClick:function(t){return e.changefontSize(t,1)}},r.a.createElement(dt.a,null)),r.a.createElement(y.a,{onClick:function(t){return e.changefontSize(t,-1)}},r.a.createElement(mt.a,null)),r.a.createElement(y.a,null,e.editMode?r.a.createElement(ut.a,{onClick:e.toogleEditMode}):r.a.createElement(ot.a,{onClick:e.toogleEditMode})))},ht=n(273),vt=n(87),Et=n.n(vt),bt=n(85),St=n.n(bt),kt=n(86),yt=n.n(kt),Ot=n(102),xt=n(142),wt=n.n(xt),jt=n(141),Ct=n.n(jt),Tt=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current},Ft=Object(x.a)((function(e){return{paper:{border:"1px solid",top:"20px",left:"20px",padding:e.spacing(1),backgroundColor:e.palette.background.paper},typography:{padding:e.spacing(1),opacity:.5}}})),Rt=function(e){var t=Object(f.f)().id,n=Ft(),o=Object(Ot.usePopupState)({variant:"popper",popupId:"favorPopper"}),c=Object(a.useRef)(),i=Tt(e.currentSongData.favor),l=Tt(t);o.setAnchorEl(c.current),Object(a.useEffect)((function(){console.log("prevId",l,"id",t),t===l&&void 0!==i&&(o.open(),setTimeout((function(){o.close()}),2e3))}),[e.currentSongData.favor]);return r.a.createElement(Ge.a,null,r.a.createElement(C.a,{variant:"h6",noWrap:!0},e.currentSongData.name+(e.editMode?" (\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435)":"")),r.a.createElement(C.a,{variant:"caption"},"last seen: ".concat(new Date(e.currentSongData.time_last_seen).toLocaleDateString())),r.a.createElement(ht.a,Object.assign({anchorEl:c},Object(Ot.bindPopper)(o)),r.a.createElement(nt.a,null,r.a.createElement(C.a,{className:n.typography},e.currentSongData.favor?"Song add to favor":"Song deleted from favor"))),r.a.createElement(y.a,{ref:c,onClick:function(){return e.toogleFavorThunk(e.currentSongData._id,e.currentSongData.favor)}},e.currentSongData.favor?r.a.createElement(St.a,null):r.a.createElement(yt.a,null)),r.a.createElement(y.a,{onClick:function(){window.confirm("Delete this song?")&&e.deleteSongThunk(e.currentSongData._id,v)}},r.a.createElement(Et.a,null)),r.a.createElement(y.a,{onClick:function(){return e.toogleHideThunk(e.currentSongData._id,e.currentSongData.hide)}},e.currentSongData.hide?r.a.createElement(Ct.a,null):r.a.createElement(wt.a,null)))},Dt=Object(x.a)((function(e){return Object(Ce.a)({root:{display:"flex",flexDirection:"column",flexWrap:"nowrap"},fab:{position:"absolute",bottom:e.spacing(5),right:e.spacing(5)},floatButtonBlock:{color:"black",position:"absolute",right:"10px",top:"100px",zIndex:100,"& Button":{display:"block"}},editable:{fontSize:function(e){return e.fontSize},padding:10,fontFace:"Roboto"}})})),It=function(e){var t=Dt(e),n=r.a.createRef();if(e.isLoading||!e.currentSongData)return r.a.createElement(Ke,null);var a,o,c="undefined"===typeof(a=e.currentSongData.content)||null===a?"":(a+"").replace(/(\r\n|\n\r|\r|\n)/g,(o||"undefined"===typeof o?"<br />":"<br>")+"$1");return r.a.createElement(r.a.Fragment,null,r.a.createElement(gt,{shuffle:function(t){t.preventDefault(),e.editMode&&e.setEditMode(!1),e.getSongByRandomThunk(e.history)},changefontSize:function(t,n){e.setFontSize(e.fontSize+n)},toogleEditMode:function(){e.setEditMode(!e.editMode),e.editMode&&n.current&&(e.setSongContentThunk(e.currentSongData._id,function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("undefined"===typeof e||null===e)return"";var n=t?"\n":"";return e.replace(/<\s*\/?br\s*[\/]?>/gi,n)}(n.current.innerText)),e.setEditMode(!1))},editMode:e.editMode}),r.a.createElement(Rt,{currentSongData:e.currentSongData,editMode:e.editMode,toogleFavorThunk:e.toogleFavorThunk,toogleHideThunk:e.toogleHideThunk,deleteSongThunk:e.deleteSongThunk}),r.a.createElement(nt.a,{elevation:3},r.a.createElement(tt.a,{html:c,innerRef:n,disabled:!e.editMode,spellCheck:"false",onChange:function(){return null},className:t.editable})))},Lt=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.match.params.id!==e.match.params.id&&this.props.getSongByIdThunk(this.props.match.params.id,this.props.match.params.index)}},{key:"componentDidMount",value:function(){this.props.getSongByIdThunk(this.props.match.params.id,this.props.match.params.index)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(It,{history:this.props.history,currentSongData:this.props.currentSongData,toogleFavorThunk:this.props.toogleFavorThunk,toogleHideThunk:this.props.toogleHideThunk,getSongByRandomThunk:this.props.getSongByRandomThunk,fontSize:this.props.fontSize,setFontSize:this.props.setFontSize,editMode:this.props.editMode,setEditMode:this.props.setEditMode,setSongContentThunk:this.props.setSongContentThunk,isLoading:this.props.isLoading,deleteSongThunk:this.props.deleteSongThunk}))}}]),n}(r.a.Component),Mt=Object(m.b)((function(e){return{currentSongData:e.songReducer.currentSongData,isLoading:e.songReducer.isLoading,fontSize:e.songReducer.fontSize,editMode:e.songReducer.editMode}}),{getSongByIdThunk:function(e,t){return function(){var n=Object(Z.a)(Y.a.mark((function n(a){var r;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(U()),n.next=3,ae(e);case 3:1===(r=n.sent).data.length&&(a(G()),a(N(r.data[0])),a($(t)));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},getSongByRandomThunk:function(e){return function(t,n){var a=n().songReducer,r=a.songs;a.getOnlyFavor&&(r=a.songs.filter((function(e){return e.favor})));var o=r[Math.floor(Math.random()*r.length)];t(_(o._id)),e.push("/card/"+o._id)}},toogleFavorThunk:he,setEditMode:J,toogleHideThunk:function(e,t){return function(){var n=Object(Z.a)(Y.a.mark((function n(a,r){return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,oe(e,!t);case 2:a(K(e)),a(P(r().songReducer.songs.filter((function(t){return t._id!=e}))));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},setSongContentThunk:function(e,t){return function(){var n=Object(Z.a)(Y.a.mark((function n(a,r){return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(U()),n.next=3,ce(e,t);case 3:202===n.sent.status&&(a(G()),a(N(Object(X.a)({},r().songReducer.currentSongData,{content:t}))));case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},setFontSize:q,setLastSongIndex:$,deleteSongThunk:ve})(Lt),zt=n(279),Bt=n(278),_t=n(144),Nt=n.n(_t),Wt=n(146),Pt=n(143),At=Object(x.a)((function(e){return{root:{},fab:{position:"fixed",bottom:e.spacing(5),right:e.spacing(4)},listContainer:{height:"85vh"}}})),Ht=function(e){var t=e.index,n=e.style,a=e.data[t];return r.a.createElement(Oe.a,{key:t,button:!0,ContainerProps:{style:n},ContainerComponent:"div"},r.a.createElement(we.a,null,a.favor?r.a.createElement(St.a,null):r.a.createElement(yt.a,null)),r.a.createElement(je.a,{component:I.a,to:"/card/"+a._id,primary:a.name,onClick:function(){return v.push("/card/"+a._id+"/"+t)}}),r.a.createElement(Bt.a,{onClick:function(){return alert("!")}},r.a.createElement(y.a,{edge:"end","aria-label":"delete"},r.a.createElement(Et.a,null))))},Gt=function(e){var t=r.a.createRef();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pt.a,null,(function(n){var a=n.height,o=n.width;return r.a.createElement(Wt.a,{ref:t,itemData:e.songs,itemCount:e.songs.length,overscanCount:20,height:a,width:o,itemSize:48,initialScrollOffset:parseInt(e.lastSongIndex)},Ht)})))},Ut=function(e){var t=e.songs,n=e.isLoading,a=e.lastSongIndex,o=At();return n?r.a.createElement(Ke,null):r.a.createElement(Ge.a,{className:o.listContainer},r.a.createElement(C.a,{variant:"h4"},"All songs"),r.a.createElement(Gt,{songs:t,lastSongIndex:a}),r.a.createElement(zt.a,{component:I.b,to:"/new",className:o.fab,color:"primary","aria-label":"add"},r.a.createElement(Nt.a,null)))},Jt=n(25),qt=function(e){return e.songReducer.term},Kt=function(e){return e.songReducer.showHidden},$t=Object(Jt.a)([function(e){return e.songReducer.songs},qt,function(e){return e.songReducer.getOnlyFavor}],(function(e,t,n){var a=e.filter((function(e){return!e.hide}));n&&(a=e.filter((function(e){return e.favor}))),Kt||(a=e.filter((function(e){return!e.hide})));var r=function(e){return 10>e?+e+2e4:e.charCodeAt(0)};return(a=a.sort((function(e,t){return r(e.name)-r(t.name)}))).sort((function(e,t){return.5-Math.random()}))})),Vt=Object(m.b)((function(e){return{songs:$t(e),term:qt(e),isLoading:e.songReducer.isLoading,getOnlyFavor:e.songReducer.getOnlyFavor,lastSongIndex:e.songReducer.lastSongIndex}}),{getSongsListThunk:ge,setTerm:A,toogleFavorThunk:he,deleteSongThunk:ve})(Ut),Xt=n(147),Qt=n(145),Yt=Object(Qt.createLogger)({level:"log"}),Zt=[].concat(Object(Xt.a)(Object(L.c)()),[Yt]),en=Object(L.a)({reducer:{songReducer:V,app:fe},middleware:Zt}),tn=n(90),nn=Object(L.b)({name:"auth",initialState:{userInfo:{}},reducers:{setUserInfo:function(e,t){e.userInfo=t.payload}}}),an=nn.actions,rn=(nn.reducer,an.setUserInfo,function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){if(this.props.error)return r.a.createElement(He,{error:this.props.error});if(!this.props.initialized)return r.a.createElement(p.a,null);var e=r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/lists/",exact:!0,render:function(){return r.a.createElement(Ve,null)}}),r.a.createElement(f.a,{path:"/new/",exact:!0,render:function(){return r.a.createElement(Ze,null)}}),r.a.createElement(f.a,{path:"/card/:id/:index(\\d+)?",component:Mt}),r.a.createElement(f.a,{path:"/cards/",exact:!0,render:function(){return r.a.createElement(Vt,null)}}),r.a.createElement(f.a,{path:"/profile/",exact:!0,render:function(){return r.a.createElement(Xe,null)}}),r.a.createElement(f.a,{exact:!0,component:Ue}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null),r.a.createElement(Ae,null),e)}}]),n}(r.a.Component)),on=Object(g.d)(Object(m.b)((function(e){return{initialized:e.app.initialized,error:e.app.error}}),{initializeApp:function(){return function(e){e(ge()),e(pe())}}}))(rn),cn=function(e){v.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)},ln=function(){return r.a.createElement(Le,{domain:tn.domain,client_id:tn.clientId,audience:tn.audience,redirect_uri:window.location.origin,onRedirectCallback:cn,cacheLocation:"localstorage"},r.a.createElement(f.b,{history:v},r.a.createElement(m.a,{store:en},r.a.createElement(on,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ln,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},90:function(e){e.exports=JSON.parse('{"domain":"random-cards.auth0.com","clientId":"6q6GS1mKNJEvMPJXhRuzTIgirstx0fvh","audience":"https://random-cards-server.herokuapp.com/api/v1/"}')}},[[171,1,2]]]);
//# sourceMappingURL=main.66ac663b.chunk.js.map