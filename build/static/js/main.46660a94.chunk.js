(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{116:function(e,t,n){e.exports={song:"SongListItem_song__1fkFe",songName:"SongListItem_songName__BA5TN",lastSeen:"SongListItem_lastSeen__2WHLC"}},136:function(e,t,n){e.exports=n(167)},166:function(e,t){},167:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),i=n.n(o),c=n(59),l=n(60),u=n(75),s=n(74),m=n(222),d=n(210),p=n(24),f=n(38),g=n(25),h=n(16),v=n(54),E=function(e){var t=e.error;return r.a.createElement(v.a,{variant:"h1"},t)},b=n(209),y=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{maxWidth:"lg"},r.a.createElement("div",null,r.a.createElement("h1",null,"Random cards"),r.a.createElement("div",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. A ab, amet aperiam doloremque ducimus eaque, enim, et facilis neque optio provident quam quas quod rem repellat rerum sequi sit suscipit."),r.a.createElement("div",null,"Accusamus alias architecto, aut cupiditate doloremque eveniet fugiat impedit in molestias nihil odio officiis porro, quo reiciendis rem tempora voluptates. Autem cum, error esse facere modi officiis quibusdam quisquam unde."),r.a.createElement("div",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Architecto beatae corporis culpa eum excepturi explicabo impedit iure minima minus molestiae nulla odit possimus quas, rem saepe soluta suscipit temporibus voluptas?"))))},S=function(){return r.a.createElement(d.a,null)};var O=function(e){if(e.isLoading)return r.a.createElement(S,null)},k=Object(p.b)((function(e){return{lists:e.lists}}),null)(O),w=n(83),j=n(36),x=n(217),F=n(219),L=n(171),C=n(232),D=n(211),R=n(10),z=n(220),T=n(218),M=n(47),I=n.n(M),_=n(48),B=n.n(_),N=n(108),q=n.n(N),A=n(109),W=n.n(A),G=n(43),U=Object(G.b)({name:"songs",initialState:{songs:[],currentSongId:null,currentSongData:{favor:!1},isLoading:!1,getOnlyFavor:!1,term:"",fontSize:14,editMode:!1},reducers:{setSongId:function(e,t){e.currentSongId=t.payload},setSongData:function(e,t){e.currentSongData=t.payload},toogleGetOnlyFavor:function(e){e.getOnlyFavor=!e.getOnlyFavor},setSongsList:function(e,t){e.songs=t.payload},setTerm:function(e,t){e.term=t.payload},setFontSize:function(e,t){e.fontSize=t.payload},setEditMode:function(e,t){e.editMode=t.payload},setLoadingOn:function(e){e.isLoading=!0},setLoadingOff:function(e){e.isLoading=!1},toogleFavor:function(e,t){e.currentSongData&&(e.currentSongData.favor=!e.currentSongData.favor),e.songs.map((function(e){return e._id===t.payload&&(e.favor=!e.favor),e}))}}}),P=U.actions,J=U.reducer,Y=P.setSongId,$=P.setSongData,H=P.toogleGetOnlyFavor,K=P.setSongsList,V=P.setTerm,Q=P.toogleFavor,X=P.setLoadingOff,Z=P.setLoadingOn,ee=P.setEditMode,te=P.setFontSize,ne=J,ae=n(105),re=n(27),oe=n.n(re),ie=n(53),ce="";ce="http://localhost:5000/api/v1/";var le=n(106).create({baseURL:ce,headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}),ue=function(e){return le.get("/cards?limit=999"+(e?"&favor=true":""))},se=function(e){return le.get("/cards?id="+e)},me=function(e,t){return le.post("/cards",{_id:e,favor:t})},de=function(e,t){return le.post("/cards",{_id:e,content:t})},pe=Object(G.b)({name:"app",initialState:{initialized:!1,error:""},reducers:{initializedSuccess:function(e){e.initialized=!0},setError:function(e,t){e.error=t.payload}}}),fe=pe.actions,ge=pe.reducer,he=fe.initializedSuccess,ve=fe.setError,Ee=ge,be=function(){return function(){var e=Object(ie.a)(oe.a.mark((function e(t,n){var a,r;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Z()),a=n().songReducer.getOnlyFavor,e.prev=2,e.next=5,ue(a);case 5:r=e.sent,t(K(r.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),t(ve(e.t0.toString()));case 13:t(X());case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()},ye=function(e,t){return function(){var n=Object(ie.a)(oe.a.mark((function n(a){return oe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,me(e,!t);case 2:a(Q(e));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Se=n(231),Oe=n(213),ke=n(229),we=n(212),je=n(214),xe=n(215),Fe=n(216),Le=n(230),Ce=Object(D.a)((function(e){return Object(Le.a)({list:{width:250},drawer:Object(j.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0})})})),De=function(e){var t=e.handleDrawerClose,n=e.open,a=Ce();return r.a.createElement(ke.a,{className:a.drawer,variant:"temporary",anchor:"left",open:n,onClose:t,classes:{paper:a.drawerPaper}},r.a.createElement("div",{className:a.list,role:"presentation",onClick:t,onKeyDown:t},r.a.createElement(we.a,null,r.a.createElement(Se.a,null,"Sergey"),r.a.createElement(Oe.a,null),r.a.createElement(je.a,{button:!0,component:g.b,to:"/cards"},r.a.createElement(xe.a,null),r.a.createElement(Fe.a,{primary:"All songs"})),r.a.createElement(Oe.a,null),r.a.createElement(je.a,{button:!0,component:g.b,to:"/sign/"},r.a.createElement(Fe.a,{primary:"Logout"})))))},Re=Object(D.a)((function(e){return{list:{width:250},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(j.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(j.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(R.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(R.b)(e.palette.common.white,.25)},marginLeft:0,width:"70%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(j.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),ze=Object(p.b)((function(e){return{getOnlyFavor:e.songReducer.getOnlyFavor}}),{toogleGetOnlyFavor:H,toogleGetOnlyFavorUpdateList:function(e,t){return function(){var e=Object(ie.a)(oe.a.mark((function e(t,n){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(H()),n().songReducer.getOnlyFavor&&t(K(n().songReducer.songs.filter((function(e){return e.favor}))));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})((function(e){var t=Object(a.useState)(!1),n=Object(w.a)(t,2),o=(n[0],n[1],Re()),i=r.a.useState(!1),c=Object(w.a)(i,2),l=c[0],u=c[1];return r.a.createElement("div",{className:o.root},r.a.createElement(x.a,{position:"sticky"},r.a.createElement(T.a,null,r.a.createElement(L.a,{edge:"start",className:o.menuButton,color:"inherit","aria-label":"open drawer",onClick:function(){u(!0)}},r.a.createElement(q.a,null)),r.a.createElement(v.a,{className:o.title,variant:"h6",noWrap:!0},r.a.createElement(F.a,{component:g.b,to:"/",style:{color:"white"}},"Random Cards")),r.a.createElement(z.a,{checked:e.getOnlyFavor,checkedIcon:r.a.createElement(I.a,null),icon:r.a.createElement(B.a,null),onChange:function(){return e.toogleGetOnlyFavor()}}),r.a.createElement("div",{className:o.search},r.a.createElement("div",{className:o.searchIcon},r.a.createElement(W.a,null)),r.a.createElement(C.a,{placeholder:"Search\u2026",classes:{root:o.inputRoot,input:o.inputInput},inputProps:{"aria-label":"search"}})))),r.a.createElement(De,{handleDrawerClose:function(){u(!1)},open:l}))})),Te=n(110),Me=n.n(Te);var Ie=n(111),_e=n.n(Ie),Be=n(112),Ne=n.n(Be),qe=n(113),Ae=n.n(qe),We=n(114),Ge=n.n(We),Ue=n(115),Pe=n.n(Ue),Je=n(226),Ye=n(170),$e=Object(D.a)((function(e){return Object(Le.a)({root:{display:"flex",flexDirection:"column",flexWrap:"nowrap"},fab:{position:"absolute",bottom:e.spacing(5),right:e.spacing(5)},floatButtonBlock:{color:"black",position:"absolute",right:"10px",top:"100px",zIndex:100,"& Button":{display:"block"}}})})),He=function(e){var t=$e(),n=r.a.createRef();if(e.isLoading||!e.currentSongData)return r.a.createElement(S,null);var a,o,i="undefined"===typeof(a=e.currentSongData.content)||null===a?"":(a+"").replace(/(\r\n|\n\r|\r|\n)/g,(o||"undefined"===typeof o?"<br />":"<br>")+"$1"),c=function(t,n){e.setFontSize(e.fontSize+n)},l=function(){e.setEditMode(!e.editMode),e.editMode&&n.current&&(e.setSongContentThunk(e.currentSongData._id,function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("undefined"===typeof e||null===e)return"";var n=t?"\n":"";return e.replace(/<\s*\/?br\s*[\/]?>/gi,n)}(n.current.innerText)),e.setEditMode(!1))},u=function(){return r.a.createElement(Je.a,{className:t.floatButtonBlock},r.a.createElement(L.a,{onClick:function(t){return t.preventDefault(),e.editMode&&e.setEditMode(!1),void e.getSongByRandomThunk(e.history)}},r.a.createElement(_e.a,null)),r.a.createElement(L.a,{onClick:function(e){return c(0,1)}},r.a.createElement(Ne.a,null)),r.a.createElement(L.a,{onClick:function(e){return c(0,-1)}},r.a.createElement(Ae.a,null)),r.a.createElement(L.a,null,e.editMode?r.a.createElement(Pe.a,{onClick:l}):r.a.createElement(Ge.a,{onClick:l})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(u,null),r.a.createElement(b.a,null,r.a.createElement(v.a,{variant:"h6",noWrap:!0},e.currentSongData.name+(e.editMode?" (\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435)":"")),r.a.createElement(v.a,{variant:"caption"},"last seen: ".concat(new Date(e.currentSongData.time_last_seen).toLocaleDateString())),r.a.createElement(L.a,{onClick:function(){return e.toogleFavorThunk(e.currentSongData._id,e.currentSongData.favor)}},e.currentSongData.favor?r.a.createElement(I.a,null):r.a.createElement(B.a,null))),r.a.createElement(Ye.a,{elevation:3},r.a.createElement(Me.a,{html:i,innerRef:n,disabled:!e.editMode,spellCheck:"false",onChange:function(){return null},style:{fontSize:e.fontSize,padding:10,fontFace:"Roboto"}})))},Ke=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.match.params.id!==e.match.params.id&&this.props.getSongByIdThunk(this.props.match.params.id)}},{key:"componentDidMount",value:function(){this.props.getSongByIdThunk(this.props.match.params.id)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(He,{history:this.props.history,currentSongData:this.props.currentSongData,toogleFavorThunk:this.props.toogleFavorThunk,getSongByRandomThunk:this.props.getSongByRandomThunk,fontSize:this.props.fontSize,setFontSize:this.props.setFontSize,editMode:this.props.editMode,setEditMode:this.props.setEditMode,setSongContentThunk:this.props.setSongContentThunk,isLoading:this.props.isLoading}))}}]),n}(r.a.Component),Ve=Object(p.b)((function(e){return{currentSongData:e.songReducer.currentSongData,isLoading:e.songReducer.isLoading,fontSize:e.songReducer.fontSize,editMode:e.songReducer.editMode}}),{getSongByIdThunk:function(e){return function(){var t=Object(ie.a)(oe.a.mark((function t(n){var a;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Z()),t.next=3,se(e);case 3:1===(a=t.sent).data.length&&(n(X()),n($(a.data[0])));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getSongByRandomThunk:function(e){return function(t,n){var a=n().songReducer,r=a.songs;a.getOnlyFavor&&(r=a.songs.filter((function(e){return e.favor})));var o=r[Math.floor(Math.random()*r.length)];t(Y(o._id)),e.push("/card/"+o._id)}},toogleFavorThunk:ye,setSongContentThunk:function(e,t){return function(){var n=Object(ie.a)(oe.a.mark((function n(a,r){return oe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Z()),n.next=3,de(e,t);case 3:202===n.sent.status&&(a(X()),a($(Object(ae.a)({},r().songReducer.currentSongData,{content:t}))));case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},setFontSize:te,setEditMode:ee})(Ke),Qe=(n(116),n(166),n(168),Object(D.a)((function(e){return{root:{width:"100%",maxWidth:360,marginLeft:20,backgroundColor:e.palette.background.paper}}}))),Xe=function(e){var t=Qe();return e.isLoading?r.a.createElement(S,null):r.a.createElement(b.a,null,r.a.createElement(v.a,{variant:"h4"},"All songs"),r.a.createElement("div",{className:t.root},r.a.createElement(we.a,{component:"nav","aria-label":"main mailbox folders"},e.songs.map((function(e){return r.a.createElement(je.a,{button:!0,key:e._id,component:g.b,to:"/card/"+e._id},r.a.createElement(xe.a,null,e.favor?r.a.createElement(I.a,null):r.a.createElement(B.a,null)),r.a.createElement(Fe.a,{primary:e.name}))})))))},Ze=n(17),et=function(e){return e.songReducer.term},tt=Object(Ze.a)([function(e){return e.songReducer.songs},et,function(e){return e.songReducer.getOnlyFavor}],(function(e,t,n){var a=e.filter((function(e){return e.name.includes(t)}));n&&(a=e.filter((function(e){return e.favor})));var r=function(e){return 10>e?+e+2e4:e.charCodeAt(0)};return a.sort((function(e,t){return r(e.name)-r(t.name)}))})),nt=Object(p.b)((function(e){return{songs:tt(e),term:et(e),isLoading:e.songReducer.isLoading,getOnlyFavor:e.songReducer.getOnlyFavor}}),{getSongsListThunk:be,setTerm:V,toogleFavorThunk:ye})(Xe),at=n(119),rt=n(117),ot=Object(rt.createLogger)({level:"log"}),it=[].concat(Object(at.a)(Object(G.c)()),[ot]),ct=Object(G.a)({reducer:{songReducer:ne,app:Ee},middleware:it}),lt=n(225),ut=n(223),st=n(228),mt=n(221),dt=n(224),pt=n(118),ft=n.n(pt),gt=function(){return r.a.createElement(v.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(mt.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")},ht=Object(D.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),vt=function(){var e=ht();return r.a.createElement(b.a,{component:"main",maxWidth:"xs"},r.a.createElement(m.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(Se.a,{className:e.avatar},r.a.createElement(ft.a,null)),r.a.createElement(v.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement(lt.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),r.a.createElement(lt.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(ut.a,{control:r.a.createElement(st.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In"),r.a.createElement(dt.a,{container:!0},r.a.createElement(dt.a,{item:!0,xs:!0},r.a.createElement(mt.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(dt.a,{item:!0},r.a.createElement(mt.a,{href:"#",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(Je.a,{mt:8},r.a.createElement(gt,null)))},Et=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){if(this.props.error)return r.a.createElement(E,{error:this.props.error});if(!this.props.initialized)return r.a.createElement(d.a,null);var e=r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/cards/",exact:!0,render:function(){return r.a.createElement(nt,null)}}),r.a.createElement(f.a,{path:"/lists/",exact:!0,render:function(){return r.a.createElement(k,null)}}),r.a.createElement(f.a,{path:"/sign/",exact:!0,render:function(){return r.a.createElement(vt,null)}}),r.a.createElement(f.a,{path:"/card/:id",component:Ve}),r.a.createElement(f.a,{exact:!0,component:y}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null),r.a.createElement(ze,null),e)}}]),n}(r.a.Component),bt=Object(h.d)(Object(p.b)((function(e){return{initialized:e.app.initialized,error:e.app.error}}),{initializeApp:function(){return function(e){e(be()),e(he())}}}))(Et),yt=function(){return r.a.createElement(g.a,null,r.a.createElement(p.a,{store:ct},r.a.createElement(bt,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(yt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[136,1,2]]]);
//# sourceMappingURL=main.46660a94.chunk.js.map